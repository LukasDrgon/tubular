!function(e,t){"use strict";e.module("tubular",["tubular.directives","tubular.services","tubular.models","LocalStorageModule"]).config(["localStorageServiceProvider","$httpProvider",function(e,t){e.setPrefix("tubular"),t.interceptors.push("tubularAuthInterceptor")}]).filter("errormessage",function(){return function(t){return e.isDefined(t)&&e.isDefined(t.data)&&t.data&&e.isDefined(t.data.ExceptionMessage)?t.data.ExceptionMessage:t.statusText||"Connection Error"}}).filter("numberorcurrency",["numberFilter","currencyFilter",function(e,t){return function(n,r,o,a){return a=a||2,"C"===r?t(n,o||"$",a):"I"===r?parseInt(n):e(n,a)}}]).filter("moment",["dateFilter",function(e){return function(n,r){return t.isMoment(n)?n.format(r||"M/DD/YYYY"):e(n)}}])}(angular,moment),function(e){"use strict";e.module("tubular.directives",["tubular.services","tubular.models"]).directive("tbGridTable",[function(){return{require:"^tbGrid",template:'<table ng-transclude class="table tubular-grid-table"></table>',restrict:"E",replace:!0,transclude:!0,scope:!0,controller:["$scope",function(e){e.$component=e.$parent.$parent.$ctrl,e.tubularDirective="tubular-grid-table"}]}}]).directive("tbColumnDefinitions",[function(){return{require:"^tbGridTable",template:"<thead><tr ng-transclude></tr></thead>",restrict:"E",replace:!0,transclude:!0,scope:!0,controller:["$scope",function(e){e.$component=e.$parent.$parent.$component,e.tubularDirective="tubular-column-definitions"}],compile:function(){return{post:function(e){e.$component.hasColumnsDefinitions=!0}}}}}]).directive("tbColumn",[function(){return{require:"^tbColumnDefinitions",template:'<th ng-transclude ng-class="{sortable: column.Sortable}" ng-show="column.Visible"></th>',restrict:"E",replace:!0,transclude:!0,scope:{visible:"=",label:"@",name:"@",sortable:"=?",sortOrder:"=?",isKey:"=?",searchable:"=?",columnType:"@?",isGrouping:"=?",aggregate:"@?",metaAggregate:"@?",sortDirection:"@?"},controller:["$scope",function(t){t.column={Label:""},t.$component=t.$parent.$parent.$component,t.tubularDirective="tubular-column",t.label=e.isDefined(t.label)?t.label:(t.name||"").replace(/([a-z])([A-Z])/g,"$1 $2"),t.sortColumn=function(e){t.$component.sortColumn(t.column.Name,e)},t.$watch("visible",function(n){e.isDefined(n)&&(t.column.Visible=n)}),t.$watch("label",function(){t.column.Label=t.label,t.$broadcast("tbColumn_LabelChanged",t.label)});var n=new function(){this.Name=t.name||null,this.Label=t.label||null,this.Sortable=t.sortable,this.SortOrder=parseInt(t.sortOrder)||-1,this.SortDirection=function(){return e.isUndefined(t.sortDirection)?"None":0===t.sortDirection.toLowerCase().indexOf("asc")?"Ascending":0===t.sortDirection.toLowerCase().indexOf("desc")?"Descending":"None"}(),this.IsKey=!!e.isDefined(t.isKey)&&t.isKey,this.Searchable=!!e.isDefined(t.searchable)&&t.searchable,this.Visible="false"!==t.visible,this.Filter=null,this.DataType=t.columnType||"string",this.IsGrouping="true"===t.isGrouping,this.Aggregate=t.aggregate||"none",this.MetaAggregate=t.metaAggregate||"none"};t.$component.addColumn(n),t.column=n,t.label=n.Label}]}}]).directive("tbColumnHeader",[function(){return{require:"^tbColumn",template:'<span><a title="Click to sort. Press Ctrl to sort by multiple columns" class="column-header" href ng-click="sortColumn($event)"><span class="column-header-default">{{ $parent.column.Label }}</span><ng-transclude></ng-transclude></a> '+"<i class=\"fa sort-icon\" ng-class=\"{'fa-long-arrow-up': $parent.column.SortDirection == 'Ascending', 'fa-long-arrow-down': $parent.column.SortDirection == 'Descending'}\">&nbsp;</i></span>",restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(e){e.sortColumn=function(t){e.$parent.sortColumn(t.ctrlKey)},e.$on("tbColumn_LabelChanged",function(t,n){e.label=n})}],link:function(e,t){t.find("ng-transclude").length>0&&t.find("span")[0].remove(),e.$parent.column.Sortable||t.find("a").replaceWith(t.find("a").children())}}}]).directive("tbRowSet",[function(){return{require:"^tbGrid",template:"<tbody ng-transclude></tbody>",restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(e){e.$component=e.$parent.$component||e.$parent.$parent.$component,e.tubularDirective="tubular-row-set"}]}}]).directive("tbFootSet",[function(){return{require:"^tbGrid",template:"<tfoot ng-transclude></tfoot>",restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(e){e.$component=e.$parent.$component||e.$parent.$parent.$component,e.tubularDirective="tubular-foot-set"}]}}]).directive("tbRowTemplate",[function(){return{template:'<tr ng-transclude ng-class="{\'info\': selectableBool && model.$selected}" ng-click="changeSelection(model)"></tr>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=rowModel",selectable:"@"},controller:["$scope",function(t){t.tubularDirective="tubular-rowset",t.fields=[],t.hasFieldsDefinitions=!1,t.selectableBool="true"===t.selectable,t.$component=t.$parent.$parent.$parent.$component,t.$watch("hasFieldsDefinitions",function(n){n!==!0||e.isUndefined(t.model)||t.bindFields()}),t.bindFields=function(){e.forEach(t.fields,function(e){e.bindScope()})},t.selectableBool&&e.isDefined(t.model)&&t.$component.selectFromSession(t.model),t.changeSelection=function(e){t.selectableBool&&t.$component.changeSelection(e)}}],compile:function(){return{post:function(e){e.hasFieldsDefinitions=!0}}}}}]).directive("tbCellTemplate",[function(){return{require:"^tbRowTemplate",template:'<td ng-transclude ng-show="column.Visible" data-label="{{::column.Label}}"></td>',restrict:"E",replace:!0,transclude:!0,scope:{columnName:"@?"},controller:["$scope",function(e){if(e.column={Visible:!0},e.columnName=e.columnName||null,e.$component=e.$parent.$parent.$component,e.getFormScope=function(){return null},null!=e.columnName){var t=e.$component.columns.filter(function(t){return t.Name===e.columnName});t.length>0&&(e.column=t[0])}}]}}])}(angular),function(e){e.module("tubular.directives").run(["$templateCache",function(e){"use strict";e.put("tbTextSearch.tpl.html",'<div class=tubular-grid-search><div class="input-group input-group-sm"><span class=input-group-addon><i class="fa fa-search"></i> </span><input type=search name=tbTextSearchInput class=form-control placeholder="{{:: $ctrl.placeholder || (\'UI_SEARCH\' | translate) }}" maxlength=20 ng-model=$ctrl.$component.search.Text ng-model-options="{ debounce: 300 }"> <span id=tb-text-search-reset-panel class=input-group-btn ng-show="$ctrl.$component.search.Text.length > 0"><button id=tb-text-search-reset-button class="btn btn-default" uib-tooltip="{{\'CAPTION_CLEAR\' | translate}}" ng-click="$ctrl.$component.search.Text = \'\'"><i class="fa fa-times-circle"></i></button></span></div></div>')}])}(angular),function(e){"use strict";e.module("tubular.directives").directive("tbForm",[function(){return{template:'<form ng-transclude name="{{name}}"></form>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=?",serverUrl:"@",serverSaveUrl:"@",serverSaveMethod:"@",modelKey:"@?",dataServiceName:"@?serviceName",requireAuthentication:"=?",name:"@?formName"},controller:"tbFormController",compile:function(){return{post:function(e){e.finishDefinition()}}}}}])}(angular),function(e){"use strict";e.module("tubular.directives").controller("tbFormController",["$scope","$routeParams","tubularModel","tubularHttp","$timeout","$element","tubularEditorService",function(t,n,r,o,a,i,l){t.tubularDirective="tubular-form",t.hasFieldsDefinitions=!1,t.fields=[],t.dataService=o.getDataService(t.dataServiceName);var s=this;s.serverSaveMethod=t.serverSaveMethod||"POST",s.name=t.name||l.getUniqueTbFormName(),t.getFormScope=function(){return t[i.attr("name")]},s.requireAuthentication=!!e.isUndefined(t.requireAuthentication)||t.requireAuthentication,o.setRequireAuthentication(s.requireAuthentication),t.$watch("hasFieldsDefinitions",function(e){e===!0&&s.retrieveData()}),t.cloneModel=function(n){var o={};e.forEach(n,function(e,t){"$"!==t[0]&&(o[t]=e)}),t.model=new r(t,t,o,t.dataService),s.bindFields()},s.bindFields=function(){e.forEach(t.fields,function(e){e.bindScope()})},s.retrieveData=function(){return t.modelKey=t.modelKey||n.param,e.isDefined(t.serverUrl)?void(e.isDefined(t.modelKey)&&null!=t.modelKey&&""!==t.modelKey?t.dataService.getByKey(t.serverUrl,t.modelKey).promise.then(function(e){t.model=new r(t,t,e,t.dataService),s.bindFields()},function(e){t.$emit("tbForm_OnConnectionError",e)}):t.dataService.get(o.addTimeZoneToUrl(t.serverUrl)).promise.then(function(n){e.isDefined(t.model)&&e.isDefined(t.model.$component)?t.model=new r(t,t.model.$component,n,t.model.$component.dataService):t.model=new r(t,t,n,t.dataService),s.bindFields(),t.model.$isNew=!0},function(e){t.$emit("tbForm_OnConnectionError",e)})):(e.isUndefined(t.model)&&(t.model=new r(t,t,{},t.dataService)),void s.bindFields())},t.save=function(n){if(t.model.$valid())return t.currentRequest=t.model.save(n),t.currentRequest===!1?void t.$emit("tbForm_OnSavingNoChanges",t):void t.currentRequest.then(function(n){e.isDefined(t.model.$component)&&e.isDefined(t.model.$component.autoRefresh)&&t.model.$component.autoRefresh&&t.model.$component.retrieveData(),t.$emit("tbForm_OnSuccessfulSave",n,t),t.clear();var r=t.getFormScope();r&&r.$setPristine()},function(e){t.$emit("tbForm_OnConnectionError",e,t)}).then(function(){t.model.$isLoading=!1,t.currentRequest=null})},t.update=t.save,t.create=function(){t.model.$isNew=!0,t.save()},t.cancel=function(){t.$emit("tbForm_OnCancel",t.model),t.clear()},t.clear=function(){e.forEach(t.fields,function(e){e.resetEditor?e.resetEditor():e.value=e.defaultValue})},t.finishDefinition=function(){var e=a(function(){t.hasFieldsDefinitions=!0,i.find("input").length&&i.find("input")[0].focus()},0);t.$emit("tbForm_OnGreetParentController",{controller:s,scope:t}),t.$on("$destroy",function(){a.cancel(e)})}}])}(angular),function(e){"use strict";e.module("tubular.directives").component("tbGrid",{template:'<div><div class="tubular-overlay" ng-show="$ctrl.showLoading && $ctrl.currentRequest != null"><div><div class="fa fa-refresh fa-2x fa-spin"></div></div></div><ng-transclude></ng-transclude></div>',transclude:!0,bindings:{serverUrl:"@",serverSaveUrl:"@",serverDeleteUrl:"@",serverSaveMethod:"@",pageSize:"=?",onBeforeGetData:"=?",requestMethod:"@",dataServiceName:"@?serviceName",requireAuthentication:"@?",name:"@?gridName",editorMode:"@?",showLoading:"=?",autoRefresh:"=?",savePage:"=?",savePageSize:"=?",saveSearch:"=?"},controller:"tbGridController"})}(angular),function(e){"use strict";e.module("tubular.directives").controller("tbGridController",["$scope","localStorageService","tubularPopupService","tubularModel","tubularHttp","$routeParams",function(t,n,r,o,a,i){var l=this;l.$onInit=function(){l.tubularDirective="tubular-grid",l.name=l.name||"tbgrid",l.columns=[],l.rows=[],l.savePage=!!e.isUndefined(l.savePage)||l.savePage,l.currentPage=l.savePage?n.get(l.name+"_page")||1:1,l.savePageSize=!!e.isUndefined(l.savePageSize)||l.savePageSize,l.pageSize=e.isUndefined(l.pageSize)?20:l.pageSize,l.saveSearch=!!e.isUndefined(l.saveSearch)||l.saveSearch,l.totalPages=0,l.totalRecordCount=0,l.filteredRecordCount=0,l.requestedPage=l.currentPage,l.hasColumnsDefinitions=!1,l.requestCounter=0,l.requestMethod=l.requestMethod||"POST",l.serverSaveMethod=l.serverSaveMethod||"POST",l.requestTimeout=2e4,l.currentRequest=null,l.autoSearch=i.param||(l.saveSearch?n.get(l.name+"_search")||"":""),l.search={Text:l.autoSearch,Operator:""===l.autoSearch?"None":"Auto"},l.isEmpty=!1,l.dataService=a.getDataService(l.dataServiceName),l.tempRow=new o(t,l,{},l.dataService),l.requireAuthentication=l.requireAuthentication||!0,a.setRequireAuthentication(l.requireAuthentication),l.editorMode=l.editorMode||"none",l.canSaveState=!1,l.groupBy="",l.showLoading=!!e.isUndefined(l.showLoading)||l.showLoading,l.autoRefresh=!!e.isUndefined(l.autoRefresh)||l.autoRefresh,l.serverDeleteUrl=l.serverDeleteUrl||l.serverSaveUrl,t.$emit("tbGrid_OnGreetParentController",l)},t.$watch("$ctrl.columns",function(){l.hasColumnsDefinitions!==!1&&l.canSaveState!==!1&&n.set(l.name+"_columns",l.columns)},!0),t.$watch("$ctrl.serverUrl",function(e,t){l.hasColumnsDefinitions===!1||l.currentRequest||e===t||l.retrieveData()},!0),t.$watch("$ctrl.hasColumnsDefinitions",function(t){if(t===!0){var n=!1;e.forEach(l.columns,function(e){if(e.IsGrouping){if(n)throw"Only one column is allowed to grouping";n=!0,e.Visible=!1,e.Sortable=!0,e.SortOrder=1,l.groupBy=e.Name}}),e.forEach(l.columns,function(e){l.groupBy!==e.Name&&e.Sortable&&e.SortOrder>0&&e.SortOrder++}),l.retrieveData()}}),t.$watch("$ctrl.pageSize",function(){l.hasColumnsDefinitions&&l.requestCounter>0&&(l.savePageSize&&n.set(l.name+"_pageSize",l.pageSize),l.retrieveData())}),t.$watch("$ctrl.requestedPage",function(){l.hasColumnsDefinitions&&l.requestCounter>0&&l.retrieveData()}),l.saveSearch=function(){l.saveSearch&&(""===l.search.Text?n.remove(l.name+"_search"):n.set(l.name+"_search",l.search.Text))},l.addColumn=function(e){if(null!=e.Name){if(l.hasColumnsDefinitions!==!1)throw"Cannot define more columns. Column definitions have been sealed";l.columns.push(e)}},l.newRow=function(n,a,i,s){l.tempRow=new o(t,l,s||{},l.dataService),l.tempRow.$isNew=!0,l.tempRow.$isEditing=!0,l.tempRow.$component=l,e.isDefined(n)&&e.isDefined(a)&&a&&r.openDialog(n,l.tempRow,l,i)},l.deleteRow=function(e){var n=l.serverDeleteUrl.split("?"),r=n[0]+"/"+e.$key;n.length>1&&(r+="?"+n[1]);var o={serverUrl:r,requestMethod:"DELETE",timeout:l.requestTimeout,requireAuthentication:l.requireAuthentication};l.currentRequest=l.dataService.retrieveDataAsync(o),l.currentRequest.promise.then(function(n){e.$hasChanges=!1,t.$emit("tbGrid_OnRemove",n)},function(e){t.$emit("tbGrid_OnConnectionError",e)}).then(function(){l.currentRequest=null,l.retrieveData()})},l.verifyColumns=function(){var t=n.get(l.name+"_columns");return null==t||""===t?void n.set(l.name+"_columns",l.columns):void e.forEach(t,function(e){var t=l.columns.filter(function(t){return t.Name===e.Name});if(0!==t.length){var n=t[0];n.Visible=e.Visible,l.requestCounter<1&&(n.SortOrder=e.SortOrder,n.SortDirection=e.SortDirection),null!=n.Filter&&null!=n.Filter.Text||null!=e.Filter&&null!=e.Filter.Text&&"None"!==e.Filter.Operator&&(n.Filter=e.Filter)}})},l.retrieveData=function(){if(l.serverUrl){l.canSaveState=!0,l.verifyColumns(),l.savePageSize&&(l.pageSize=n.get(l.name+"_pageSize")||l.pageSize),l.pageSize<10&&(l.pageSize=20);var a=Math.ceil(l.totalRecordCount/l.pageSize);l.requestedPage>a&&(l.requestedPage=a);var i=(l.requestedPage-1)*l.pageSize;i<0&&(i=0);var s={serverUrl:l.serverUrl,requestMethod:l.requestMethod||"POST",timeout:l.requestTimeout,requireAuthentication:l.requireAuthentication,data:{Count:l.requestCounter,Columns:l.columns,Skip:i,Take:parseInt(l.pageSize),Search:l.search,TimezoneOffset:(new Date).getTimezoneOffset()}};null===l.currentRequest&&(e.isUndefined(l.onBeforeGetData)===!1&&l.onBeforeGetData(),t.$emit("tbGrid_OnBeforeRequest",s,l),l.currentRequest=l.dataService.retrieveDataAsync(s),l.currentRequest.promise.then(function(a){if(l.requestCounter+=1,e.isUndefined(a)||null==a)return void t.$emit("tbGrid_OnConnectionError",{statusText:"Data is empty",status:0});if(l.dataSource=a,!a.Payload){var i="tubularGrid("+l.$id+"): response is invalid.";return l.currentRequest.cancel(i),void t.$emit("tbGrid_OnConnectionError",i)}l.rows=a.Payload.map(function(e){var n=new o(t,l,e,l.dataService);return n.$component=l,n.editPopup=function(n,a){r.openDialog(n,new o(t,l,e,l.dataService),l,a)},n}),t.$emit("tbGrid_OnDataLoaded",l),l.aggregationFunctions=a.AggregationPayload,l.currentPage=a.CurrentPage,l.totalPages=a.TotalPages,l.totalRecordCount=a.TotalRecordCount,l.filteredRecordCount=a.FilteredRecordCount,l.isEmpty=0===l.filteredRecordCount,l.savePage&&n.set(l.name+"_page",l.currentPage)},function(e){l.requestedPage=l.currentPage,t.$emit("tbGrid_OnConnectionError",e)}).then(function(){l.currentRequest=null}))}},l.sortColumn=function(n,r){var o=l.columns.filter(function(e){return e.Name===n});if(0!==o.length){var a=o[0];if(a.Sortable!==!1){var i=a.SortDirection,s="None"===i?"Ascending":"Ascending"===i?"Descending":"None";"None"===s?(a.SortOrder=-1,a.SortDirection="None"):(a.SortOrder=Number.MAX_VALUE,a.SortDirection=s),r===!1&&e.forEach(l.columns.filter(function(e){return e.Name!==n}),function(e){e.SortOrder=-1,e.SortDirection="None"});var c=l.columns.filter(function(e){return e.SortOrder>0});c.sort(function(e,t){return e.SortOrder===t.SortOrder?0:e.SortOrder>t.SortOrder}),c.forEach(function(e,t){e.SortOrder=t+1}),t.$broadcast("tbGrid_OnColumnSorted"),l.retrieveData()}}},l.selectedRows=function(){return n.get(l.name+"_rows")||[]},l.clearSelection=function(){e.forEach(l.rows,function(e){e.$selected=!1}),n.set(l.name+"_rows",[])},l.isEmptySelection=function(){return 0===l.selectedRows().length},l.selectFromSession=function(e){e.$selected=l.selectedRows().filter(function(t){return t.$key===e.$key}).length>0},l.changeSelection=function(t){if(!e.isUndefined(t)){t.$selected=!t.$selected;var r=l.selectedRows();t.$selected?r.push({$key:t.$key}):r=r.filter(function(e){return e.$key!==t.$key}),n.set(l.name+"_rows",r)}},l.getFullDataSource=function(e){l.dataService.retrieveDataAsync({serverUrl:l.serverUrl,requestMethod:l.requestMethod||"POST",timeout:l.requestTimeout,requireAuthentication:l.requireAuthentication,data:{Count:l.requestCounter,Columns:l.columns,Skip:0,Take:-1,Search:{Text:"",Operator:"None"}}}).promise.then(function(t){e(t.Payload)},function(e){t.$emit("tbGrid_OnConnectionError",e)}).then(function(){l.currentRequest=null})},l.visibleColumns=function(){return l.columns.filter(function(e){return e.Visible}).length}}])}(angular),function(e){"use strict";e.module("tubular.directives").component("tbTextSearch",{require:{$component:"^tbGrid"},templateUrl:"tbTextSearch.tpl.html",bindings:{minChars:"@?",placeholder:"@"},controller:"tbTextSearchController"})}(angular),function(e){"use strict";e.module("tubular.directives").controller("tbTextSearchController",["$scope",function(t){function n(e){r.$component.saveSearch(),r.$component.search.Operator=e,r.$component.retrieveData()}var r=this;r.$onInit=function(){r.minChars=r.minChars||3,r.lastSearch=r.$component.search.Text},t.$watch("$ctrl.$component.search.Text",function(t,o){if(!e.isUndefined(t)&&t!==o)return r.$component.search.Text=t,r.lastSearch&&""===t?void n("None"):void(""===t||t.length<r.minChars||t===r.lastSearch||(r.lastSearch=t,n("Auto")))})}])}(angular),function(e,t){"use strict";function n(){var t=e.element('<input type="date" value=":)" />');return"date"===t.attr("type")&&""===t.val()}function r(n){return function(r){if(!e.isUndefined(r)&&(e.isString(r)&&(n.value=t(r)),!e.isDefined(n.dateValue)))if(t.isMoment(n.value)){var o=n.value.toObject();n.dateValue=new Date(o.years,o.months,o.date,o.hours,o.minutes,o.seconds)}else n.dateValue=n.value}}t.fn.toJSON=function(){return this.format()};var o=["tubularEditorService","$scope","translateFilter","filterFilter",function(t,n,r,o){var a=this;a.validate=function(){if(t.isValid(a.regex)&&t.isValid(a.value)){var n=new RegExp(a.regex);if(n.test(a.value)===!1)return a.$valid=!1,void(a.state.$errors=[a.regexErrorMessage||r("EDITOR_REGEX_DOESNT_MATCH")])}if(t.isValid(a.match)&&a.value!==a.$component.model[a.match]){var i=o(a.$component.fields,{name:a.match},!0)[0].label;return a.$valid=!1,void(a.state.$errors=[r("EDITOR_MATCH",i)])}return e.isDefined(a.min)&&e.isDefined(a.value)&&null!=a.value&&a.value.length<parseInt(a.min)?(a.$valid=!1,void(a.state.$errors=[r("EDITOR_MIN_CHARS",a.min)])):e.isDefined(a.max)&&e.isDefined(a.value)&&null!=a.value&&a.value.length>parseInt(a.max)?(a.$valid=!1,void(a.state.$errors=[r("EDITOR_MAX_CHARS",a.max)])):void 0},a.$onInit=function(){t.setupScope(n,null,a,!1)}}],a=["tubularEditorService","$scope","translateFilter",function(t,n,r){var o=this;o.validate=function(){return e.isDefined(o.min)&&null!=o.min&&e.isDefined(o.value)&&null!=o.value&&(o.$valid=o.value>=o.min,!o.$valid)?void(o.state.$errors=[r("EDITOR_MIN_NUMBER",o.min)]):void(e.isDefined(o.max)&&null!=o.max&&e.isDefined(o.value)&&null!=o.value&&(o.$valid=o.value<=o.max,o.$valid||(o.state.$errors=[r("EDITOR_MAX_NUMBER",o.max)])))},o.$onInit=function(){o.DataType="numeric",t.setupScope(n,0,o,!1)}}],i=["$scope","$element","tubularEditorService","translateFilter","dateFilter",function(n,o,a,i,l){var s=this;n.$watch(function(){return s.value},r(s)),n.$watch(function(){return s.dateValue},function(n){e.isDefined(n)&&(s.value=t(n))}),s.validate=function(){return a.isValid(s.min)&&(e.isDate(s.min)||(s.min=new Date(s.min)),s.$valid=s.value>=s.min,!s.$valid)?void(s.state.$errors=[i("EDITOR_MIN_DATE",l(s.min,s.format))]):void(a.isValid(s.max)&&(e.isDate(s.max)||(s.max=new Date(s.max)),s.$valid=s.value<=s.max,s.$valid||(s.state.$errors=[i("EDITOR_MAX_DATE",l(s.max,s.format))])))},s.$onInit=function(){s.DataType="date",a.setupScope(n,s.format,s),e.isUndefined(s.format)&&(s.format="MMM D, Y")}}],l=["$scope","$element","tubularEditorService","translateFilter","dateFilter",function(n,o,a,i,l){var s=this;n.$watch(function(){return s.value},r(s)),n.$watch(function(){return s.dateValue},function(n){e.isDefined(n)&&(s.value=t(n))}),s.validate=function(){return e.isDefined(s.min)&&(e.isDate(s.min)||(s.min=new Date(s.min)),s.$valid=s.dateValue>=s.min,!s.$valid)?void(s.state.$errors=[i("EDITOR_MIN_DATE",l(s.min,s.format))]):void(e.isDefined(s.max)&&(e.isDate(s.max)||(s.max=new Date(s.max)),s.$valid=s.dateValue<=s.max,s.$valid||(s.state.$errors=[i("EDITOR_MAX_DATE",l(s.max,s.format))])))},s.$onInit=function(){s.DataType="date",a.setupScope(n,s.format,s),e.isUndefined(s.format)&&(s.format="MMM D, Y")}}],s=["tubularEditorService","$scope",function(t,n){var r=this;r.$onInit=function(){t.setupScope(n,null,r),r.dataIsLoaded=!1,r.selectOptions="d for d in $ctrl.options",e.isDefined(r.optionLabel)&&(r.selectOptions="d."+r.optionLabel+" for d in $ctrl.options",e.isDefined(r.optionTrack)?r.selectOptions="d as d."+r.optionLabel+" for d in $ctrl.options track by d."+r.optionTrack:e.isDefined(r.optionKey)&&(r.selectOptions="d."+r.optionKey+" as "+r.selectOptions)),e.isDefined(r.optionsUrl)&&(n.$watch("optionsUrl",function(e,t){e!==t&&(r.dataIsLoaded=!1,r.loadData())}),r.isEditing?r.loadData():n.$watch("$ctrl.isEditing",function(){r.isEditing&&r.loadData()}))},n.updateReadonlyValue=function(){r.readOnlyValue=r.value,r.value&&e.isDefined(r.optionLabel)&&r.options&&(e.isDefined(r.optionKey)?r.readOnlyValue=r.options.filter(function(e){return e[r.optionKey]===r.value})[0][r.optionLabel]:r.readOnlyValue=r.options[r.optionLabel])},n.$watch(function(){return r.value},function(e){n.$emit("tbForm_OnFieldChange",r.$component,r.name,e,r.options),n.updateReadonlyValue()}),r.loadData=function(){if(!r.dataIsLoaded){if(e.isUndefined(r.$component)||null==r.$component)throw"You need to define a parent Form or Grid";var t=r.$component.dataService.retrieveDataAsync({serverUrl:r.optionsUrl,requestMethod:r.optionsMethod||"GET"}),o=r.value;r.value="",t.promise.then(function(t){r.options=t,r.dataIsLoaded=!0;var n=r.options&&r.options.length>0?e.isDefined(r.optionKey)?r.options[0][r.optionKey]:r.options[0]:"";r.value=o||r.defaultValue||n;var a=r.getFormField();a&&a.$setDirty()},function(e){n.$emit("tbGrid_OnConnectionError",e)})}}}];e.module("tubular.directives").component("tbSimpleEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing" ng-bind="$ctrl.value"></span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"></label><input type="{{$ctrl.editorType}}" placeholder="{{$ctrl.placeholder}}" ng-show="$ctrl.isEditing" ng-model="$ctrl.value" class="form-control"  ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}" /><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',bindings:{regex:"@?",regexErrorMessage:"@?",value:"=?",isEditing:"=?",editorType:"@",showLabel:"=?",label:"@?",required:"=?",min:"=?",max:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",defaultValue:"@?",match:"@?"},controller:o}).component("tbNumericEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing">{{$ctrl.value | numberorcurrency: format }}</span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"></label><div class="input-group" ng-show="$ctrl.isEditing"><div class="input-group-addon" ng-hide="$ctrl.format == \'I\'"><i ng-class="{ \'fa\': true, \'fa-calculator\': $ctrl.format != \'C\', \'fa-usd\': $ctrl.format == \'C\'}"></i></div><input type="number" placeholder="{{$ctrl.placeholder}}" ng-model="$ctrl.value" class="form-control" ng-required="$ctrl.required" ng-hide="$ctrl.readOnly" step="{{$ctrl.step || \'any\'}}"  name="{{$ctrl.name}}" /><p class="form-control form-control-static text-right" ng-show="$ctrl.readOnly">{{$ctrl.value | numberorcurrency: format}}</span></p></div><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",defaultValue:"@?",step:"=?"},controller:a}).component("tbDateTimeEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing">{{ $ctrl.value | date: format }}</span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"></label>'+(n()?'<input type="datetime-local" ng-show="$ctrl.isEditing" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}"/>':'<div class="input-group" ng-show="$ctrl.isEditing"><input type="text" uib-datepicker-popup="{{$ctrl.format}}" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}" is-open="$ctrl.open" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.open = !$ctrl.open"><i class="fa fa-calendar"></i></button></span></div><div uib-timepicker ng-model="$ctrl.dateValue"  show-seconds="true" show-meridian="false"></div>')+'<span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",readOnly:"=?",defaultValue:"@?",help:"@?"},controller:i}).component("tbDateEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing">{{ $ctrl.value | moment: $ctrl.format }}</span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"></label>'+(n()?'<input type="date" ng-show="$ctrl.isEditing" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}"/>':'<div class="input-group" ng-show="$ctrl.isEditing"><input type="text" uib-datepicker-popup="{{$ctrl.format}}" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}" is-open="$ctrl.open" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.open = !$ctrl.open"><i class="fa fa-calendar"></i></button></span></div>')+'<span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",readOnly:"=?",defaultValue:"@?",help:"@?"},controller:l}).component("tbDropdownEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing" ng-bind="$ctrl.readOnlyValue"></span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"></label><select ng-options="{{ $ctrl.selectOptions }}" ng-show="$ctrl.isEditing" ng-model="$ctrl.value" class="form-control" ng-required="$ctrl.required" ng-disabled="$ctrl.readOnly" name="{{$ctrl.name}}" ng-change="onChange({value: value})"></select><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",name:"@",readOnly:"=?",help:"@?",defaultValue:"@?",options:"=?",optionsUrl:"@",optionsMethod:"@?",optionLabel:"@?",optionKey:"@?",optionTrack:"@?",onChange:"&?"},controller:s}).directive("tbTypeaheadEditor",["$q","$compile",function(t,n){return{restrict:"E",replace:!0,scope:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",options:"=?",optionsUrl:"@",optionsMethod:"@?",optionLabel:"@?",css:"@?"},link:function(e,t){var r='<div ng-class="{ \'form-group\' : showLabel && isEditing, \'has-error\' : !$valid && $dirty() }"><span ng-hide="isEditing" ng-bind="value"></span><label ng-show="showLabel" ng-bind="label"></label><div class="input-group" ng-show="isEditing"><input ng-model="value" placeholder="{{placeholder}}" title="{{tooltip}}" autocomplete="off" class="form-control {{css}}" ng-readonly="readOnly || lastSet.indexOf(value) !== -1" uib-typeahead="'+e.selectOptions+'" ng-required="required" name="{{name}}" /> <div class="input-group-addon" ng-hide="lastSet.indexOf(value) !== -1"><i class="fa fa-pencil"></i></div><span class="input-group-btn" ng-show="lastSet.indexOf(value) !== -1" tabindex="-1"><button class="btn btn-default" type="button" ng-click="value = null"><i class="fa fa-times"></i></span></div><span class="help-block error-block" ng-show="isEditing" ng-repeat="error in state.$errors">{{error}}</span><span class="help-block" ng-show="isEditing && help" ng-bind="help"></span></div>',o=n(r),a=o(e);t.append(a)},controller:["$scope","tubularEditorService",function(n,r){r.setupScope(n),n.selectOptions="d for d in getValues($viewValue)",n.lastSet=[],e.isDefined(n.optionLabel)&&(n.selectOptions="d as d."+n.optionLabel+" for d in getValues($viewValue)"),n.$watch("value",function(t){n.$emit("tbForm_OnFieldChange",n.$component,n.name,t,n.options),n.tooltip=t,e.isDefined(t)&&null!=t&&e.isDefined(n.optionLabel)&&(n.tooltip=t[n.optionLabel])}),n.getValues=function(r){if(e.isDefined(n.optionsUrl)){if(e.isUndefined(n.$component)||null==n.$component)throw"You need to define a parent Form or Grid";var o=n.$component.dataService.retrieveDataAsync({serverUrl:n.optionsUrl+"?search="+r,requestMethod:n.optionsMethod||"GET"}).promise;return o.then(function(e){return n.lastSet=e,e}),o}return t(function(e){n.lastSet=n.options,e(n.options)})}}]}}]).component("tbHiddenField",{template:'<input type="hidden" ng-model="$ctrl.value" class="form-control" name="{{$ctrl.name}}"  />',bindings:{value:"=?",name:"@"},controller:["tubularEditorService","$scope",function(e,t){var n=this;n.$onInit=function(){e.setupScope(t,null,n,!0)}}]}).component("tbCheckboxField",{template:'<div ng-class="{ \'checkbox\' : $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }" class="tubular-checkbox"><input type="checkbox" ng-model="$ctrl.value" ng-disabled="$ctrl.readOnly || !$ctrl.isEditing"class="tubular-checkbox" id="{{$ctrl.name}}" name="{{$ctrl.name}}" /> <label ng-show="$ctrl.isEditing" for="{{$ctrl.name}}" ng-bind="$ctrl.label"></label><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',
bindings:{value:"=?",isEditing:"=?",editorType:"@",showLabel:"=?",label:"@?",required:"=?",name:"@",readOnly:"=?",help:"@?",checkedValue:"=?",uncheckedValue:"=?"},controller:["tubularEditorService","$scope",function(t,n){var r=this;r.$onInit=function(){r.required=!1,r.checkedValue=!e.isDefined(r.checkedValue)||r.checkedValue,r.uncheckedValue=!!e.isDefined(r.uncheckedValue)&&r.uncheckedValue,t.setupScope(n,null,r,!0)}}]}).component("tbTextArea",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing" ng-bind="$ctrl.value"></span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"></label><textarea ng-show="$ctrl.isEditing" placeholder="{{$ctrl.placeholder}}" ng-model="$ctrl.value" class="form-control"  ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}"></textarea><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",placeholder:"@?",required:"=?",min:"=?",max:"=?",name:"@",readOnly:"=?",help:"@?"},controller:["tubularEditorService","$scope","translateFilter",function(e,t,n){var r=this;r.validate=function(){return e.isValid(r.min)&&e.isValid(r.value)&&r.value.length<parseInt(r.min)?(r.$valid=!1,void(r.state.$errors=[n("EDITOR_MIN_CHARS",+r.min)])):e.isValid(r.max)&&e.isValid(r.value)&&r.value.length>parseInt(r.max)?(r.$valid=!1,void(r.state.$errors=[n("EDITOR_MAX_CHARS",+r.max)])):void 0},r.$onInit=function(){e.setupScope(t,null,r,!1)}}]})}(angular,moment),function(e){"use strict";e.module("tubular.directives").component("tbColumnFilterButtons",{require:{$columnFilter:"^?tbColumnFilter",$columnDateTimeFilter:"^?tbColumnDateTimeFilter",$columnOptionsFilter:"^?tbColumnOptionsFilter"},template:'<div class="text-right"><button class="btn btn-sm btn-success" ng-click="$ctrl.currentFilter.applyFilter()"ng-disabled="$ctrl.currentFilter.filter.Operator == \'None\'">{{::\'CAPTION_APPLY\' | translate}}</button>&nbsp;<button class="btn btn-sm btn-danger" ng-click="$ctrl.currentFilter.clearFilter()">{{::\'CAPTION_CLEAR\' | translate}}</button></div>',controller:["$scope",function(e){var t=this;t.$onInit=function(){t.currentFilter=t.$columnFilter||t.$columnDateTimeFilter||t.$columnOptionsFilter||e.$parent.$ctrl}}]}).component("tbColumnSelector",{require:{$component:"^tbGrid"},template:'<button class="btn btn-sm btn-default" ng-click="$ctrl.openColumnsSelector()">{{::\'CAPTION_SELECTCOLUMNS\' | translate}}</button></div>',controller:["$uibModal",function(e){var t=this;t.openColumnsSelector=function(){var n=t.$component.columns,r=e.open({template:'<div class="modal-header"><h3 class="modal-title">{{::\'CAPTION_SELECTCOLUMNS\' | translate}}</h3></div><div class="modal-body"><table class="table table-bordered table-responsive table-striped table-hover table-condensed"><thead><tr><th>Visible?</th><th>Name</th></tr></thead><tbody><tr ng-repeat="col in Model"><td><input type="checkbox" ng-model="col.Visible" ng-disabled="col.Visible && isInvalid()" /></td><td>{{col.Label}}</td></tr></tbody></table></div></div><div class="modal-footer"><button class="btn btn-warning" ng-click="closePopup()">{{::\'CAPTION_CLOSE\' | translate}}</button></div>',backdropClass:"fullHeight",animation:!1,controller:["$scope",function(e){e.Model=n,e.isInvalid=function(){return 1===e.Model.filter(function(e){return e.Visible}).length},e.closePopup=r.close}]})}}]}).component("tbColumnFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'click outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"></i></button></div>',bindings:{text:"@",argument:"@",operator:"@",title:"@",onlyContains:"=?"},controller:["$scope","tubularTemplateService",function(t,n){var r=this;r.$onInit=function(){r.onlyContains=!e.isUndefined(r.onlyContains)&&r.onlyContains,r.templateName=n.tbColumnFilterPopoverTemplateName,n.setupFilter(t,r)}}]}).component("tbColumnDateTimeFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"></i></button></div>',bindings:{text:"@",argument:"@",operator:"@",title:"@"},controller:["$scope","tubularTemplateService",function(e,t){var n=this;n.$onInit=function(){n.templateName=t.tbColumnDateTimeFilterPopoverTemplateName,t.setupFilter(e,n)}}]}).component("tbColumnOptionsFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'click outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"></i></button></div>',bindings:{argument:"@",operator:"@",optionsUrl:"@",title:"@"},controller:["$scope","tubularTemplateService",function(e,t){var n=this;n.getOptionsFromUrl=function(){if(n.dataIsLoaded)return void e.$apply();var t=n.$component.dataService.retrieveDataAsync({serverUrl:n.filter.OptionsUrl,requestMethod:"GET"});t.promise.then(function(e){n.optionsItems=e,n.dataIsLoaded=!0},function(t){e.$emit("tbGrid_OnConnectionError",t)})},n.$onInit=function(){n.dataIsLoaded=!1,n.templateName=t.tbColumnOptionsFilterPopoverTemplateName,t.setupFilter(e,n),n.getOptionsFromUrl(),n.filter.Operator="Multiple"}}]})}(angular),function(e){"use strict";e.module("tubular.directives").component("tbRemoveButton",{require:"^tbGrid",template:'<button class="btn btn-danger btn-xs btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="right" popover-title="{{ $ctrl.legend || (\'UI_REMOVEROW\' | translate) }}" popover-is-open="$ctrl.isOpen" popover-trigger="\'click outsideClick\'"  ng-hide="$ctrl.model.$isEditing"><span ng-show="$ctrl.showIcon" class="{{::$ctrl.icon}}"></span><span ng-show="$ctrl.showCaption">{{:: $ctrl.caption || (\'CAPTION_REMOVE\' | translate) }}</span></button>',bindings:{model:"=",caption:"@",cancelCaption:"@",legend:"@",icon:"@"},controller:["tubularTemplateService",function(t){var n=this;n.$onInit=function(){n.showIcon=e.isDefined(n.icon),n.showCaption=!(n.showIcon&&e.isUndefined(n.caption)),n.templateName=t.tbRemoveButtonrPopoverTemplateName}}]}).directive("tbSaveButton",[function(){return{require:"^tbGrid",template:'<div ng-show="model.$isEditing"><button ng-click="save()" class="btn btn-default {{:: saveCss || \'\' }}" ng-disabled="!model.$valid()">{{:: saveCaption || (\'CAPTION_SAVE\' | translate) }}</button><button ng-click="cancel()" class="btn {{:: cancelCss || \'btn-default\' }}">{{:: cancelCaption || (\'CAPTION_CANCEL\' | translate) }}</button></div>',restrict:"E",replace:!0,scope:{model:"=",isNew:"=?",saveCaption:"@",saveCss:"@",cancelCaption:"@",cancelCss:"@"},controller:["$scope",function(t){t.isNew=t.isNew||!1,t.save=function(){if(t.isNew&&(t.model.$isNew=!0),t.model.$valid())return t.currentRequest=t.model.save(),t.currentRequest===!1?void t.$emit("tbGrid_OnSavingNoChanges",t.model):void t.currentRequest.then(function(n){t.model.$isEditing=!1,e.isDefined(t.model.$component)&&e.isDefined(t.model.$component.autoRefresh)&&t.model.$component.autoRefresh&&t.model.$component.retrieveData(),t.$emit("tbGrid_OnSuccessfulSave",n,t.model.$component)},function(e){t.$emit("tbGrid_OnConnectionError",e)})},t.cancel=function(){t.model.revertChanges()}}]}}]).component("tbEditButton",{require:{$component:"^tbGrid"},template:'<button ng-click="$ctrl.edit()" class="btn btn-xs btn-default" ng-hide="$ctrl.model.$isEditing">{{:: $ctrl.caption || (\'CAPTION_EDIT\' | translate) }}</button>',bindings:{model:"=",caption:"@"},controller:function(){var e=this;e.edit=function(){"popup"===e.$component.editorMode?e.model.editPopup():e.model.edit()}}}).component("tbPageSizeSelector",{require:{$component:"^tbGrid"},template:'<div class="{{::$ctrl.css}}"><form class="form-inline"><div class="form-group"><label class="small">{{:: $ctrl.caption || (\'UI_PAGESIZE\' | translate) }} </label>&nbsp;<select ng-model="$ctrl.$component.pageSize" class="form-control input-sm {{::$ctrl.selectorCss}}" ng-options="item for item in options"></select></div></form></div>',bindings:{caption:"@",css:"@",selectorCss:"@",options:"=?"},controller:["$scope",function(t){t.options=e.isDefined(t.$ctrl.options)?t.$ctrl.options:[10,20,50,100]}]}).component("tbExportButton",{require:{$component:"^tbGrid"},template:'<div class="btn-group" uib-dropdown><button class="btn btn-info btn-sm {{::$ctrl.css}}" uib-dropdown-toggle><span class="fa fa-download"></span>&nbsp;{{:: $ctrl.caption || (\'UI_EXPORTCSV\' | translate)}}&nbsp;<span class="caret"></span></button><ul class="dropdown-menu" uib-dropdown-menu><li><a href="javascript:void(0)" ng-click="$ctrl.downloadCsv($parent)">{{:: $ctrl.captionMenuCurrent || (\'UI_CURRENTROWS\' | translate)}}</a></li><li><a href="javascript:void(0)" ng-click="$ctrl.downloadAllCsv($parent)">{{:: $ctrl.captionMenuAll || (\'UI_ALLROWS\' | translate)}}</a></li></ul></div>',bindings:{filename:"@",css:"@",caption:"@",captionMenuCurrent:"@",captionMenuAll:"@"},controller:["tubularGridExportService",function(e){var t=this;t.downloadCsv=function(){e.exportGridToCsv(t.filename,t.$component)},t.downloadAllCsv=function(){e.exportAllGridToCsv(t.filename,t.$component)}}]}).component("tbPrintButton",{require:{$component:"^tbGrid"},template:'<button class="btn btn-default btn-sm" ng-click="$ctrl.printGrid()"><span class="fa fa-print"></span>&nbsp;{{:: $ctrl.caption || (\'CAPTION_PRINT\' | translate)}}</button>',bindings:{title:"@",printCss:"@",caption:"@"},controller:["$window",function(t){var n=this;n.printGrid=function(){n.$component.getFullDataSource(function(r){var o='<table class="table table-bordered table-striped"><thead><tr>'+n.$component.columns.filter(function(e){return e.Visible}).map(function(e){return"<th>"+(e.Label||e.Name)+"</th>"}).join(" ")+"</tr></thead><tbody>"+r.map(function(t){return e.isObject(t)&&(t=Object.keys(t).map(function(e){return t[e]})),"<tr>"+t.map(function(t,r){return e.isDefined(n.$component.columns[r])&&!n.$component.columns[r].Visible?"":"<td>"+t+"</td>"}).join(" ")+"</tr>"}).join("  ")+"</tbody></table>",a=t.open("about:blank","Print","menubar=0,location=0,height=500,width=800");a.document.write('<link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/latest/css/bootstrap.min.css" />'),""!==n.printCss&&a.document.write('<link rel="stylesheet" href="'+n.printCss+'" />'),a.document.write('<body onload="window.print();">'),a.document.write("<h1>"+n.title+"</h1>"),a.document.write(o),a.document.write("</body>"),a.document.close()})}}]})}(angular),function(e){"use strict";e.module("tubular.directives").component("tbGridPager",{require:{$component:"^tbGrid"},template:'<div class="tubular-pager"><ul uib-pagination ng-disabled="$ctrl.$component.isEmpty" direction-links="true" first-text="&#xf049;" previous-text="&#xf04a;" next-text="&#xf04e;" last-text="&#xf050;"boundary-links="true" total-items="$ctrl.$component.filteredRecordCount" items-per-page="$ctrl.$component.pageSize" max-size="5" ng-model="$ctrl.$component.currentPage" ng-change="$ctrl.pagerPageChanged()"></ul><div>',scope:!0,terminal:!1,controller:["$scope",function(e){var t=this;e.$watch("$ctrl.$component.currentPage",function(){t.$component.currentPage!==t.$component.requestedPage&&(t.$component.requestedPage=t.$component.currentPage)}),t.pagerPageChanged=function(){t.$component.requestedPage=t.$component.currentPage}}]}).component("tbGridPagerInfo",{require:{$component:"^tbGrid"},template:'<div class="pager-info small" ng-hide="$ctrl.$component.isEmpty">{{\'UI_SHOWINGRECORDS\' | translate: $ctrl.currentInitial:$ctrl.currentTop:$ctrl.$component.filteredRecordCount}} <span ng-show="$ctrl.filtered">{{\'UI_FILTEREDRECORDS\' | translate: $ctrl.$component.totalRecordCount}}</span></div>',bindings:{cssClass:"@?"},controller:["$scope",function(e){var t=this;t.fixCurrentTop=function(){t.currentTop=t.$component.pageSize*t.$component.currentPage,t.currentInitial=(t.$component.currentPage-1)*t.$component.pageSize+1,t.currentTop>t.$component.filteredRecordCount&&(t.currentTop=t.$component.filteredRecordCount),t.currentTop<0&&(t.currentTop=0),(t.currentInitial<0||0===t.$component.totalRecordCount)&&(t.currentInitial=0),t.$component.pageSize>t.$component.filteredRecordCount&&(t.currentInitial=1,t.currentTop=t.$component.filteredRecordCount)},e.$watch("$ctrl.$component.filteredRecordCount",function(){t.filtered=t.$component.totalRecordCount!==t.$component.filteredRecordCount,t.fixCurrentTop()}),e.$watch("$ctrl.$component.currentPage",t.fixCurrentTop),e.$watch("$ctrl.$component.pageSize",t.fixCurrentTop),t.$onInit=t.fixCurrentTop}]})}(angular),function(e,t){"use strict";e.module("tubular.models",[]).factory("tubularModel",function(){return function(n,r,o,a){var i={$key:"",$addField:function(t,r,o){this[t]=r,e.isUndefined(this.$original)&&(this.$original={}),this.$original[t]=o?void 0:r,o&&(this.$hasChanges=!0),e.isUndefined(this.$state)&&(this.$state={}),n.$watch(function(){return i[t]},function(e,n){e!==n&&(i.$hasChanges=i[t]!==i.$original[t])})}};return e.isArray(o)===!1&&e.forEach(Object.keys(o),function(e){i.$addField(e,o[e])}),e.isDefined(r.columns)&&e.forEach(r.columns,function(n,r){var a=e.isDefined(o[r])?o[r]:o[n.Name];e.isUndefined(a)&&0===o[r]&&(a=0),i.$addField(n.Name,a),"date"!==n.DataType&&"datetime"!==n.DataType&&"datetimeutc"!==n.DataType||(null===i[n.Name]||""===i[n.Name]?i[n.Name]="":i[n.Name]="datetimeutc"===n.DataType?t.utc(i[n.Name]):t(i[n.Name])),n.IsKey&&(i.$key+=i[n.Name]+",")}),i.$key.length>1&&(i.$key=i.$key.substring(0,i.$key.length-1)),i.$hasChanges=i.$isEditing=!1,i.$selected=!1,i.$isNew=!1,i.$valid=function(){var t=!0;return e.forEach(i.$state,function(n){e.isUndefined(n)||n.$valid()||(t=!1)}),t},i.save=function(t){if(e.isUndefined(a)||null==a)throw"Define DataService to your model.";if(e.isUndefined(r.serverSaveUrl)||null==r.serverSaveUrl)throw"Define a Save URL.";return!!(t||i.$isNew||i.$hasChanges)&&(i.$isLoading=!0,a.saveDataAsync(i,{serverUrl:r.serverSaveUrl,requestMethod:i.$isNew?r.serverSaveMethod||"POST":"PUT"}).promise)},i.edit=function(){i.$isEditing&&i.$hasChanges&&i.save(),i.$isEditing=!i.$isEditing},i.delete=function(){r.deleteRow(i)},i.resetOriginal=function(){e.forEach(i.$original,function(e){i.$original[e]=i[e]})},i.revertChanges=function(){e.forEach(Object.keys(i),function(t){"$"===t[0]||e.isUndefined(i.$original[t])||(i[t]=i.$original[t])}),i.$hasChanges=i.$isEditing=!1},i}})}(angular,moment),function(e,t){"use strict";function n(e){return e.columns.map(function(e){return e.Label})}function r(e){return e.columns.map(function(e){return e.Visible})}function o(n,r,o,a){var i=function(t){e.isObject(t)&&(t=Object.keys(t).map(function(e){return t[e]}));for(var n="",r=0;r<t.length;r++)if(a[r]){var o=null==t[r]?"":t[r].toString();e.isDate(t[r])&&(o=t[r].toLocaleString());var i=o.replace(/"/g,'""');i.search(/("|,|\n)/g)>=0&&(i='"'+i+'"'),r>0&&(n+=","),n+=i}return n+"\n"},l="";r.length>0&&(l+=i(r));for(var s=0;s<o.length;s++)l+=i(o[s]);var c=new Blob(["\ufeff"+l],{type:"text/csv;charset=utf-8;"});t(c,n)}e.module("tubular.services",["ui.bootstrap","LocalStorageModule"]).factory("tubularGridExportService",function(){return{exportAllGridToCsv:function(e,t){var a=n(t),i=r(t);t.getFullDataSource(function(t){o(e,a,t,i)})},exportGridToCsv:function(e,t){var a=n(t),i=r(t);t.currentRequest={},o(e,a,t.dataSource.Payload,i),t.currentRequest=null}}})}(angular,saveAs),function(e){"use strict";e.module("tubular.services").service("tubularEditorService",["translateFilter",function(t){var n=this;n.isValid=function(e){return!!e},n.getUniqueTbFormName=function(){return n.tbFormCounter=n.tbFormCounter||(n.tbFormCounter=-1),n.tbFormCounter++,"tbForm"+n.tbFormCounter},n.setupScope=function(n,r,o,a){e.isUndefined(o)&&(o=n),o.isEditing=!!e.isUndefined(o.isEditing)||o.isEditing,o.showLabel=o.showLabel||!1,o.label=o.label||(o.name||"").replace(/([a-z])([A-Z])/g,"$1 $2"),o.required=o.required||!1,o.readOnly=o.readOnly||!1,o.format=o.format||r,o.$valid=!0,o.getFormField=function(){for(var t=n.$parent;null!=t;){if(e.isDefined(t.tubularDirective)&&"tubular-form"===t.tubularDirective){var r=t.getFormScope();return null==r?null:r[n.Name]}t=t.$parent}return null},o.$dirty=function(){var e=o.getFormField();return null==e||e.$dirty},o.checkValid=function(){return o.$valid=!0,o.state.$errors=[],e.isUndefined(o.value)&&o.required||e.isDate(o.value)&&isNaN(o.value.getTime())&&o.required?(o.$valid=!1,o.state.$errors=[t("EDITOR_REQUIRED")],void(e.isDefined(n.$parent.Model)&&(n.$parent.Model.$state[n.Name]=o.state))):void(e.isUndefined(o.validate)||o.validate())},n.$watch(function(){return o.value},function(t,r){e.isUndefined(r)&&e.isUndefined(t)||(o.state={$valid:function(){return o.checkValid(),0===this.$errors.length},$dirty:o.$dirty,$errors:[]},o.$valid=!0,e.isDefined(n.$parent.Model)&&(e.isDefined(n.$parent.Model[o.name])?(n.$parent.Model[o.name]=t,e.isUndefined(n.$parent.Model.$state)&&(n.$parent.Model.$state=[]),n.$parent.Model.$state[n.Name]=o.state):e.isDefined(n.$parent.Model.$addField)&&n.$parent.Model.$addField(o.name,t,!0)),o.checkValid())});for(var i=n.$parent;null!=i;){if(e.isDefined(i.tubularDirective)&&("tubular-form"===i.tubularDirective||"tubular-rowset"===i.tubularDirective)){if(null===o.name)return;if(i.hasFieldsDefinitions!==!1)throw"Cannot define more fields. Field definitions have been sealed";o.$component="tubular-form"===i.tubularDirective?i:i.$component,n.Name=o.name,o.bindScope=function(){if(n.$parent.Model=i.model,e.equals(o.value,i.model[n.Name])===!1){if(e.isDefined(i.model[n.Name]))if("date"===o.DataType&&null!=i.model[n.Name]&&e.isString(i.model[n.Name])){var t=new Date(Date.parse(i.model[n.Name])).toString().match(/([-\+][0-9]+)\s/)[1];t=t.substr(0,t.length-2)+":"+t.substr(t.length-2,2),o.value=new Date(Date.parse(i.model[n.Name].replace("Z","")+t))}else o.value=i.model[n.Name];i.$watch(function(){return o.value},function(e){e!==i.model[n.Name]&&(i.model[n.Name]=e)})}if(n.$watch(function(){return i.model[n.Name]},function(e){e!==o.value&&(o.value=e)},!0),null==o.value&&o.defaultValue&&null!=o.defaultValue&&("date"===o.DataType&&e.isString(o.defaultValue)&&(o.defaultValue=new Date(o.defaultValue)),"numeric"===o.DataType&&e.isString(o.defaultValue)&&(o.defaultValue=parseFloat(o.defaultValue)),o.value=o.defaultValue),e.isUndefined(i.model.$state)&&(i.model.$state={}),i.model.$state[n.Name]={$valid:function(){return o.checkValid(),0===this.$errors.length},$dirty:o.$dirty,$errors:[]},e.equals(o.state,i.model.$state[n.Name])===!1&&(o.state=i.model.$state[n.Name]),a){var r=o.getFormField();r&&r.$setDirty()}},i.fields.push(o);break}i=i.$parent}}}])}(angular),function(e){"use strict";e.module("tubular.services").factory("tubularPopupService",["$uibModal","$rootScope","tubularTemplateService",function(t,n,r){return{onSuccessForm:function(e){var t=n.$on("tbForm_OnSuccessfulSave",e);n.$on("$destroy",t)},onConnectionError:function(e){var t=n.$on("tbForm_OnConnectionError",e);n.$on("$destroy",t)},openDialog:function(o,a,i,l){e.isUndefined(o)&&(o=r.generatePopup(a));var s=t.open({templateUrl:o,backdropClass:"fullHeight",animation:!1,size:l,controller:["$scope",function(t){t.Model=a,t.savePopup=function(r,o){if(r=r||t.Model,!o&&!r.$isNew&&!r.$hasChanges)return t.closePopup(),null;var a=r.save(o);return e.isUndefined(a)||a===!1?null:(a.then(function(e){return t.$emit("tbForm_OnSuccessfulSave",e),n.$broadcast("tbForm_OnSuccessfulSave",e),t.Model.$isLoading=!1,i.autoRefresh&&i.retrieveData(),s.close(),e},function(e){return t.$emit("tbForm_OnConnectionError",e),n.$broadcast("tbForm_OnConnectionError",e),t.Model.$isLoading=!1,e}),a)},t.closePopup=function(){e.isDefined(t.Model.revertChanges)&&t.Model.revertChanges(),s.close()}}]});return s}}}])}(angular),function(e){"use strict";e.module("tubular.services").service("tubularTemplateService",["$templateCache","translateFilter",function(t,n){var r=this;if(r.canUseHtml5Date=function(){var t=e.element('<input type="date" value=":)" />');return"date"===t.attr("type")&&""===t.val()},r.enums={dataTypes:["numeric","date","boolean","string"],editorTypes:["tbSimpleEditor","tbNumericEditor","tbDateTimeEditor","tbDateEditor","tbDropdownEditor","tbTypeaheadEditor","tbHiddenField","tbCheckboxField","tbTextArea"],httpMethods:["POST","PUT","GET","DELETE"],gridModes:["Read-Only","Inline","Popup","Page"],formLayouts:["Simple","Two-columns","Three-columns"],sortDirections:["Ascending","Descending"]},r.defaults={gridOptions:{Pager:!0,FreeTextSearch:!0,PageSizeSelector:!0,PagerInfo:!0,ExportCsv:!0,Mode:"Read-Only",RequireAuthentication:!1,ServiceName:"",RequestMethod:"GET",GridName:"grid"},formOptions:{CancelButton:!0,SaveUrl:"",SaveMethod:"POST",Layout:"Simple",ModelKey:"",RequireAuthentication:!1,ServiceName:"",dataUrl:""},fieldsSettings:{tbSimpleEditor:{ShowLabel:!0,Placeholder:!0,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!0},tbNumericEditor:{ShowLabel:!0,Placeholder:!0,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDateTimeEditor:{ShowLabel:!0,Placeholder:!1,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDateEditor:{ShowLabel:!0,Placeholder:!1,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDropdownEditor:{ShowLabel:!0,Placeholder:!1,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbTypeaheadEditor:{ShowLabel:!0,Placeholder:!0,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbHiddenField:{ShowLabel:!1,Placeholder:!1,Format:!1,Help:!1,Required:!1,ReadOnly:!1,EditorType:!1},tbCheckboxField:{ShowLabel:!1,Placeholder:!1,Format:!1,Help:!0,Required:!1,ReadOnly:!0,EditorType:!1},tbTextArea:{ShowLabel:!0,Placeholder:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1}}},r.tbColumnFilterPopoverTemplateName="tbColumnFilterPopoverTemplate.html",r.tbColumnDateTimeFilterPopoverTemplateName="tbColumnDateTimeFilterPopoverTemplate.html",r.tbColumnOptionsFilterPopoverTemplateName="tbColumnOptionsFilterPopoverTemplate.html",r.tbRemoveButtonrPopoverTemplateName="tbRemoveButtonrPopoverTemplate.html",t.get(r.tbColumnFilterPopoverTemplateName)||(r.tbColumnFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control" ng-options="key as value for (key , value) in $ctrl.filterOperators" ng-model="$ctrl.filter.Operator" ng-hide="$ctrl.dataType == \'boolean\' || $ctrl.onlyContains"></select>&nbsp;<input class="form-control" type="search" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" ng-hide="$ctrl.dataType == \'boolean\'"placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" /><div class="text-center" ng-show="$ctrl.dataType == \'boolean\'"><button type="button" class="btn btn-default btn-md" ng-disabled="$ctrl.filter.Text === true" ng-click="$ctrl.filter.Text = true; $ctrl.filter.Operator = \'Equals\';"><i class="fa fa-check"></i></button>&nbsp;<button type="button" class="btn btn-default btn-md" ng-disabled="$ctrl.filter.Text === false" ng-click="$ctrl.filter.Text = false; $ctrl.filter.Operator = \'Equals\';"><i class="fa fa-times"></i></button></div><input type="search" class="form-control" ng-model="$ctrl.filter.Argument[0]" ng-keypress="$ctrl.checkEvent($event)" ng-show="$ctrl.filter.Operator == \'Between\'" /><hr /><tb-column-filter-buttons></tb-column-filter-buttons></form></div>',t.put(r.tbColumnFilterPopoverTemplateName,r.tbColumnFilterPopoverTemplate)),!t.get(r.tbColumnDateTimeFilterPopoverTemplateName)){var o='<input class="form-control" type="date" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" /><input type="date" class="form-control" ng-model="$ctrl.filter.Argument[0]" ng-keypress="$ctrl.checkEvent($event)" ng-show="$ctrl.filter.Operator == \'Between\'" />',a='<div class="input-group"><input type="text" class="form-control" uib-datepicker-popup="MM/dd/yyyy" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" is-open="$ctrl.dateOpen" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.dateOpen = !$ctrl.dateOpen;"><i class="fa fa-calendar"></i></button></span></div>';r.tbColumnDateTimeFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control" ng-options="key as value for (key , value) in $ctrl.filterOperators" ng-model="$ctrl.filter.Operator" ng-hide="$ctrl.dataType == \'boolean\'"></select>&nbsp;'+(r.canUseHtml5Date()?o:a)+"<hr /><tb-column-filter-buttons></tb-column-filter-buttons></form></div>",t.put(r.tbColumnDateTimeFilterPopoverTemplateName,r.tbColumnDateTimeFilterPopoverTemplate)}t.get(r.tbColumnOptionsFilterPopoverTemplateName)||(r.tbColumnOptionsFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control checkbox-list" ng-options="item.Key as item.Label for item in $ctrl.optionsItems" ng-model="$ctrl.filter.Argument" multiple ng-disabled="$ctrl.dataIsLoaded == false"></select>&nbsp;<hr /><tb-column-filter-buttons></tb-column-filter-buttons></form></div>',t.put(r.tbColumnOptionsFilterPopoverTemplateName,r.tbColumnOptionsFilterPopoverTemplate)),t.get(r.tbRemoveButtonrPopoverTemplateName)||(r.tbRemoveButtonrPopoverTemplate='<div class="tubular-remove-popover"><button ng-click="$ctrl.model.delete()" class="btn btn-danger btn-xs">{{:: $ctrl.caption || (\'CAPTION_REMOVE\' | translate) }}</button>&nbsp;<button ng-click="$ctrl.isOpen = false;" class="btn btn-default btn-xs">{{:: $ctrl.cancelCaption || (\'CAPTION_CANCEL\' | translate) }}</button></div>',t.put(r.tbRemoveButtonrPopoverTemplateName,r.tbRemoveButtonrPopoverTemplate)),r.generateCells=function(e,t){return e.map(function(e){var n=e.EditorType.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});return'\r\n\t\t<tb-cell-template column-name="'+e.Name+'">\r\n\t\t\t'+("Inline"===t?"<"+n+' is-editing="row.$isEditing" value="row.'+e.Name+'"></'+n+">":e.Template)+"\r\n\t\t</tb-cell-template>"}).join("")},r.generateGrid=function(e,t){var n="",o="";return t.Pager&&(n+='\r\n\t<tb-grid-pager class="col-md-6"></tb-grid-pager>',o+='\r\n\t<tb-grid-pager class="col-md-6"></tb-grid-pager>'),t.ExportCsv&&(n+='\r\n\t<div class="col-md-3">\r\n\t\t<div class="btn-group">\r\n\t\t<tb-print-button title="Tubular"></tb-print-button>\r\n\t\t<tb-export-button filename="tubular.csv" css="btn-sm"></tb-export-button>\r\n\t\t</div>\r\n\t</div>'),t.FreeTextSearch&&(n+='\r\n\t<tb-text-search class="col-md-3" css="input-sm"></tb-text-search>'),t.PageSizeSelector&&(o+='\r\n\t<tb-page-size-selector class="col-md-3" selectorcss="input-sm"></tb-page-size-selector>'),t.PagerInfo&&(o+='\r\n\t<tb-grid-pager-info class="col-md-3"></tb-grid-pager-info>'),'<div class="container">\r\n<tb-grid server-url="'+t.dataUrl+'" request-method="'+t.RequestMethod+'" class="row" page-size="10" require-authentication="'+t.RequireAuthentication+'" '+(""!==t.ServiceName?' service-name="'+t.ServiceName+'"':"")+("Read-Only"!==t.Mode?' editor-mode="'+t.Mode.toLowerCase()+'"':"")+">"+(""===n?"":'\r\n\t<div class="row">'+n+"\r\n\t</div>")+'\r\n\t<div class="row">\r\n\t<div class="col-md-12">\r\n\t<div class="panel panel-default panel-rounded">\r\n\t<tb-grid-table class="table-bordered">\r\n\t<tb-column-definitions>'+("Read-Only"!==t.Mode?'\r\n\t\t<tb-column label="Actions"><tb-column-header>{{label}}</tb-column-header></tb-column>':"")+e.map(function(e){return'\r\n\t\t<tb-column name="'+e.Name+'" label="'+e.Label+'" column-type="'+e.DataType+'" sortable="'+e.Sortable+'" \r\n\t\t\tis-key="'+e.IsKey+'" searchable="'+e.Searchable+'" '+(e.Sortable?'\r\n\t\t\tsort-direction="'+e.SortDirection+'" sort-order="'+e.SortOrder+'" ':" ")+'visible="'+e.Visible+'">'+(e.Filter?"\r\n\t\t\t<tb-column-filter></tb-column-filter>":"")+"\r\n\t\t\t<tb-column-header>{{label}}</tb-column-header>\r\n\t\t</tb-column>"}).join("")+'\r\n\t</tb-column-definitions>\r\n\t<tb-row-set>\r\n\t<tb-row-template ng-repeat="row in $component.rows" row-model="row">'+("Read-Only"!==t.Mode?"\r\n\t\t<tb-cell-template>"+("Inline"===t.Mode?'\r\n\t\t\t<tb-save-button model="row"></tb-save-button>':"")+'\r\n\t\t\t<tb-edit-button model="row"></tb-edit-button>\r\n\t\t</tb-cell-template>':"")+r.generateCells(e,t.Mode)+"\r\n\t</tb-row-template>\r\n\t</tb-row-set>\r\n\t</tb-grid-table>\r\n\t</div>\r\n\t</div>\r\n\t</div>"+(""===o?"":'\r\n\t<div class="row">'+o+"\r\n\t</div>")+"\r\n</tb-grid>\r\n</div>"},r.getEditorTypeByDateType=function(e){switch(e){case"date":return"tbDateTimeEditor";case"numeric":return"tbNumericEditor";case"boolean":return"tbCheckboxField";default:return"tbSimpleEditor"}},r.createColumns=function(t){var n=e.isArray(t)&&t.length>0?t[0]:t,o=[];for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];if("$"===a[0]||e.isFunction(i)||null==i)continue;if(e.isNumber(i)||parseFloat(i).toString()===i)o.push({Name:a,DataType:"numeric",Template:"{{row."+a+" | number}}"});else if("[object Date]"===toString.call(i)||isNaN(new Date(i).getTime())===!1)o.push({Name:a,DataType:"date",Template:"{{row."+a+" | date}}"});else if("true"===i.toLowerCase()||"false"===i.toLowerCase())o.push({Name:a,DataType:"boolean",Template:"{{row."+a+' ? "TRUE" : "FALSE" }}'});else{var l={Name:a,DataType:"string",Template:"{{row."+a+"}}"};/e(-|)mail/gi.test(l.Name)&&(l.Template='<a href="mailto:'+l.Template+'">'+l.Template+"</a>"),o.push(l)}}var s=!1;return e.forEach(o,function(e){e.Label=e.Name.replace(/([a-z])([A-Z])/g,"$1 $2"),e.EditorType=r.getEditorTypeByDateType(e.DataType),e.Searchable="string"===e.DataType,e.Filter=!0,e.Visible=!0,e.Sortable=!0,e.IsKey=!1,e.SortOrder=0,e.SortDirection="",e.ShowLabel=!0,e.Placeholder="",e.Format="",e.Help="",e.Required=!0,e.ReadOnly=!1,s||(e.IsKey=!0,e.SortOrder=1,e.SortDirection="Ascending",s=!0)}),o},r.generatePopupTemplate=function(e,t){var n=r.createColumns(e);return'<tb-form model="Model"><div class="modal-header"><h3 class="modal-title">'+(t||"Edit Row")+'</h3></div><div class="modal-body">'+r.generateFieldsArray(n).join("")+'</div><div class="modal-footer"><button class="btn btn-primary" ng-click="savePopup()" ng-disabled="!Model.$valid()">Save</button><button class="btn btn-danger" ng-click="closePopup()" formnovalidate>Cancel</button></div></tb-form>'},r.generatePopup=function(e,n){var o="temp"+(new Date).getTime()+".html",a=r.generatePopupTemplate(e,n);return t.put(o,a),o},r.generateForm=function(e,t){var n,o="Simple"===t.Layout?"":t.Layout.toLowerCase(),a=r.generateFieldsArray(e);return n=""===o?a.join(""):'\r\n\t<div class="row">'+("two-columns"===o?'\r\n\t<div class="col-md-6">'+a.filter(function(e,t){return t%2===0}).join("")+'\r\n\t</div>\r\n\t<div class="col-md-6">'+a.filter(function(e,t){return t%2===1}).join("")+"</div>":'\r\n\t<div class="col-md-4">'+a.filter(function(e,t){return t%3===0}).join("")+'\r\n\t</div>\r\n\t<div class="col-md-4">'+a.filter(function(e,t){return t%3===1}).join("")+'\r\n\t</div>\r\n\t<div class="col-md-4">'+a.filter(function(e,t){
return t%3===2}).join("")+"\r\n\t</div>")+"\r\n\t</div>",'<tb-form server-save-method="'+t.SaveMethod+'" model-key="'+t.ModelKey+'" require-authentication="'+t.RequireAuthentication+'" server-url="'+t.dataUrl+'" server-save-url="'+t.SaveUrl+'"'+(""!==t.ServiceName?' service-name="'+t.ServiceName+'"':"")+">\r\n\t"+n+'\r\n\t<div>\r\n\t\t<button class="btn btn-primary" ng-click="$parent.save()" ng-disabled="!$parent.model.$valid()">Save</button>'+(t.CancelButton?'\r\n\t\t<button class="btn btn-danger" ng-click="$parent.cancel()" formnovalidate>Cancel</button>':"")+"\r\n\t</div>\r\n</tb-form>"},r.generateFieldsArray=function(e){return e.map(function(e){var t=e.EditorType.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),n=r.defaults.fieldsSettings[e.EditorType];return"\r\n\t<"+t+' name="'+e.Name+'"'+(n.EditorType?'\r\n\t\teditor-type="'+e.DataType+'" ':"")+(n.ShowLabel?'\r\n\t\tlabel="'+e.Label+'" show-label="'+e.ShowLabel+'"':"")+(n.Placeholder?'\r\n\t\tplaceholder="'+e.Placeholder+'"':"")+(n.Required?'\r\n\t\trequired="'+e.Required+'"':"")+(n.ReadOnly?'\r\n\t\tread-only="'+e.ReadOnly+'"':"")+(n.Format?'\r\n\t\tformat="'+e.Format+'"':"")+(n.Help?'\r\n\t\thelp="'+e.Help+'"':"")+">\r\n\t</"+t+">"})},r.setupFilter=function(t,r){var o={None:n("OP_NONE"),Equals:n("OP_EQUALS"),NotEquals:n("OP_NOTEQUALS"),Between:n("OP_BETWEEN"),Gte:">=",Gt:">",Lte:"<=",Lt:"<"},a={string:{None:n("OP_NONE"),Equals:n("OP_EQUALS"),NotEquals:n("OP_NOTEQUALS"),Contains:n("OP_CONTAINS"),NotContains:n("OP_NOTCONTAINS"),StartsWith:n("OP_STARTSWITH"),NotStartsWith:n("OP_NOTSTARTSWITH"),EndsWith:n("OP_ENDSWITH"),NotEndsWith:n("OP_NOTENDSWITH")},numeric:{None:n("OP_NONE"),Equals:n("OP_EQUALS"),Between:n("OP_BETWEEN"),Gte:">=",Gt:">",Lte:"<=",Lt:"<"},date:o,datetime:o,datetimeutc:o,boolean:{None:n("OP_NONE"),Equals:n("OP_EQUALS"),NotEquals:n("OP_NOTEQUALS")}};r.filter={Text:r.text||null,Argument:r.argument?[r.argument]:null,Operator:r.operator||"Contains",OptionsUrl:r.optionsUrl||null,HasFilter:!(null==r.text),Name:t.$parent.$parent.column.Name},r.filterTitle=r.title||n("CAPTION_FILTER"),t.$watch(function(){var e=r.$component.columns.filter(function(e){return e.Name===r.filter.Name});return 0!==e.length?e[0]:null},function(e){e&&r.filter.HasFilter!==e.Filter.HasFilter&&(r.filter.HasFilter=e.Filter.HasFilter,r.filter.Text=e.Filter.Text,r.retrieveData())},!0),r.retrieveData=function(){var e=r.$component.columns.filter(function(e){return e.Name===r.filter.Name});0!==e.length&&(e[0].Filter=r.filter),r.$component.retrieveData(),r.close()},r.clearFilter=function(){"Multiple"!==r.filter.Operator&&(r.filter.Operator="None"),e.isDefined(r.onlyContains)&&r.onlyContains&&(r.filter.Operator="Contains"),r.filter.Text="",r.filter.Argument=[],r.filter.HasFilter=!1,r.retrieveData()},r.applyFilter=function(){r.filter.HasFilter=!0,r.retrieveData()},r.close=function(){r.isOpen=!1},r.checkEvent=function(e){13===e.which&&(r.applyFilter(),e.preventDefault())};var i=r.$component.columns.filter(function(e){return e.Name===r.filter.Name});t.$watch("$ctrl.filter.Operator",function(e){"None"===e&&(r.filter.Text="")}),0!==i.length&&(t.$watch("$ctrl.filter",function(e){i[0].Filter.Text!==e.Text&&(e.Text=i[0].Filter.Text,i[0].Filter.Operator!==e.Operator&&(e.Operator=i[0].Filter.Operator)),r.filter.HasFilter=i[0].Filter.HasFilter}),i[0].Filter=r.filter,r.dataType=i[0].DataType,r.filterOperators=a[r.dataType],"date"!==r.dataType&&"datetime"!==r.dataType&&"datetimeutc"!==r.dataType||(r.filter.Argument=[new Date],"Contains"===r.filter.Operator&&(r.filter.Operator="Equals")),"numeric"!==r.dataType&&"boolean"!==r.dataType||(r.filter.Argument=[1],"Contains"===r.filter.Operator&&(r.filter.Operator="Equals")))}}])}(angular),function(e){"use strict";e.module("tubular.services").service("tubularHttp",["$http","$timeout","$q","localStorageService","translateFilter","$log","$document",function(t,n,r,o,a,i,l){function s(){var t=o.get("auth_data");e.isDefined(t)&&null!=t&&(b.userData=t,p())}function c(e){var t=new Date;return e=new Date(e),e-t<=0}function u(){o.remove("auth_data")}function d(){u(),o.set("auth_data",b.userData)}function p(){t.defaults.headers.common.Authorization="Bearer "+b.userData.bearerToken}function m(){var t=o.get("auth_data");if(e.isUndefined(t))throw"No authentication data exists";if(c(t.expirationDate))throw"Authentication token has already expired";b.userData=t,p()}function f(){b.userData.isAuthenticated=!1,b.userData.username="",b.userData.bearerToken="",b.userData.expirationDate=null,b.userData.refreshToken=null}var b=this;b.userData={isAuthenticated:!1,username:"",bearerToken:"",expirationDate:null},b.isBearerTokenExpired=function(){return c(b.userData.expirationDate)},b.useRefreshTokens=!1,b.requireAuthentication=!0,b.refreshTokenUrl=b.tokenUrl="/api/token",b.apiBaseUrl="/api",b.setRequireAuthentication=function(e){b.requireAuthentication=e},b.setTokenUrl=function(e){b.tokenUrl=e},b.setRefreshTokenUrl=function(e){b.refreshTokenUrl=e},b.setApiBaseUrl=function(e){b.apiBaseUrl=e},b.isAuthenticated=function(){if(!b.userData.isAuthenticated||c(b.userData.expirationDate))try{m()}catch(e){return!1}return!0},b.setAccessTokenAsExpired=function(){b.userData.expirationDate=new Date((new Date).getTime()-1e4),d()},b.removeAuthentication=function(){u(),f(),t.defaults.headers.common.Authorization=null},b.authenticate=function(n,r,o,i){this.removeAuthentication(),t({method:"POST",url:b.tokenUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+encodeURIComponent(n)+"&password="+encodeURIComponent(r)}).then(function(e){b.handleSuccessCallback(o,e.data,n)},function(t){e.isFunction(i)&&i(t.data.error_description||a("UI_HTTPERROR"))})},b.handleSuccessCallback=function(t,n,r){b.userData.isAuthenticated=!0,b.userData.username=n.userName||r||b.userData.username,b.userData.bearerToken=n.access_token,b.userData.expirationDate=new Date,b.userData.expirationDate=new Date(b.userData.expirationDate.getTime()+1e3*n.expires_in),b.userData.role=n.role,b.userData.refreshToken=n.refresh_token,p(),d(),e.isFunction(t)&&t(n)},b.addTimeZoneToUrl=function(e){return e+(e.indexOf("?")===-1?"?":"&")+"timezoneOffset="+(new Date).getTimezoneOffset()},b.saveDataAsync=function(t,n){var r=t.$component;t.$component=null;var o=e.copy(t);t.$component=r;var a=e.copy(t.$original);delete o.$isEditing,delete o.$hasChanges,delete o.$selected,delete o.$original,delete o.$state,delete o.$valid,delete o.$component,delete o.$isLoading,delete o.$isNew,t.$isNew?(n.serverUrl=b.addTimeZoneToUrl(n.serverUrl),n.data=o):n.data={Old:a,New:o,TimezoneOffset:(new Date).getTimezoneOffset()};var i=b.retrieveDataAsync(n);return i.promise.then(function(e){return t.$hasChanges=!1,t.resetOriginal(),e}),i},b.getExpirationDate=function(){var e=new Date;return new Date(e.getTime()+3e5)},b.getCancel=function(e){return function(t){i.error(t),e.resolve(t)}},b.retrieveDataAsync=function(o){var a=r.defer(),i=b.getCancel(a);if(e.isUndefined(o.requireAuthentication)&&(o.requireAuthentication=b.requireAuthentication),e.isString(o.requireAuthentication)&&(o.requireAuthentication="true"===o.requireAuthentication),!b.useRefreshTokens&&o.requireAuthentication&&b.isAuthenticated()===!1)return{promise:r(function(e){e(null)}),cancel:i};o.timeout=o.timeout||17e3;var s=n(function(){i("Timed out")},o.timeout),c=t({url:o.serverUrl,method:o.requestMethod,data:o.data,timeout:a.promise}).then(function(e){return n.cancel(s),e.data},function(e){return 401===e.status&&(b.removeAuthentication(),l.location=l.location),r.reject(e)});return{promise:c,cancel:i}},b.get=function(e,n){if(!b.useRefreshTokens&&b.requireAuthentication&&!b.isAuthenticated()){var o=r.defer();return{promise:r(function(e){e(null)}),cancel:b.getCancel(o)}}return{promise:t.get(e,n).then(function(e){return e.data})}},b.getBinary=function(e){return b.get(e,{responseType:"arraybuffer"})},b.delete=function(e){if(!b.useRefreshTokens&&b.requireAuthentication&&!b.isAuthenticated()){var t=r.defer();return{promise:r(function(e){e(null)}),cancel:b.getCancel(t)}}return b.retrieveDataAsync({serverUrl:e,requestMethod:"DELETE"})},b.post=function(e,t){if(!b.useRefreshTokens&&b.requireAuthentication&&!b.isAuthenticated()){var n=r.defer();return{promise:r(function(e){e(null)}),cancel:b.getCancel(n)}}return b.retrieveDataAsync({serverUrl:e,requestMethod:"POST",data:t})},b.postBinary=function(e,n){var o=r.defer(),a=b.getCancel(o);if(!b.useRefreshTokens&&b.requireAuthentication&&!b.isAuthenticated())return{promise:r(function(e){e(null)}),cancel:a};var i=t({url:e,method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){return e},data:n});return{promise:i,cancel:a}},b.put=function(e,t){if(!b.useRefreshTokens&&b.requireAuthentication&&!b.isAuthenticated()){var n=r.defer();return{promise:r(function(e){e(null)}),cancel:b.getCancel(n)}}return b.retrieveDataAsync({serverUrl:e,requestMethod:"PUT",data:t})},b.getByKey=function(e,t){var n=b.addTimeZoneToUrl(e).split("?"),r=n[0]+t;return n.length>1&&(r+="?"+n[1]),b.get(r)},b.instances=[],b.registerService=function(e,t){b.instances[e]=t},b.getDataService=function(t){if(e.isUndefined(t)||null==t||"tubularHttp"===t)return b;var n=b.instances[t];return null==n?b:n},s()}])}(angular),function(e){"use strict";e.module("tubular.services").factory("tubularAuthInterceptor",["$q","$injector",function(e,t){var n=null,r="tubularHttp";return{request:function(n){var o=t.get(r),a=o.apiBaseUrl;return n.headers=n.headers||{},n.url.substring(0,a.length)===a&&o.tokenUrl!==n.url&&o.useRefreshTokens&&o.requireAuthentication&&o.userData.refreshToken&&o.isBearerTokenExpired()?e.reject({error:"expired token",status:401,config:n}):n},requestError:function(t){return e.reject(t)},response:function(e){return e},responseError:function(o){var a=e.defer();switch(o.status){case 401:var i=t.get(r),l=i.apiBaseUrl;return o.config.url.substring(0,l.length)===l&&i.tokenUrl!==o.config.url&&i.useRefreshTokens&&i.requireAuthentication&&i.userData.refreshToken?(n||(n=t.get("$http")({method:"POST",url:i.refreshTokenUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=refresh_token&refresh_token="+i.userData.refreshToken})),n.then(function(e){n=null,i.handleSuccessCallback(null,e.data),i.requireAuthentication&&i.isAuthenticated()?(o.config.headers.Authorization="Bearer "+i.userData.bearerToken,t.get("$http")(o.config).then(function(e){a.resolve(e)},function(){a.reject(e)})):a.reject(o)},function(e){n=null,a.reject(e),i.removeAuthentication(),t.get("$state").go("/Login")})):a.reject(o),a.promise}return a.reject(o),a.promise}}}])}(angular),function(e){"use strict";e.module("tubular.services").service("tubularTranslate",[function(){var e=this;e.currentLanguage="en",e.defaultLanguage="en",e.translationTable={en:{EDITOR_REGEX_DOESNT_MATCH:"The field doesn't match the regular expression.",EDITOR_REQUIRED:"The field is required.",EDITOR_MIN_CHARS:"The field needs to be minimum {0} chars.",EDITOR_MAX_CHARS:"The field needs to be maximum {0} chars.",EDITOR_MIN_NUMBER:"The minimum number is {0}.",EDITOR_MAX_NUMBER:"The maximum number is {0}.",EDITOR_MIN_DATE:"The minimum date is {0}.",EDITOR_MAX_DATE:"The maximum date is {0}.",EDITOR_MATCH:"The field needs to match the {0} field.",CAPTION_APPLY:"Apply",CAPTION_CLEAR:"Clear",CAPTION_CLOSE:"Close",CAPTION_SELECTCOLUMNS:"Select Columns",CAPTION_FILTER:"Filter",CAPTION_VALUE:"Value",CAPTION_REMOVE:"Remove",CAPTION_CANCEL:"Cancel",CAPTION_EDIT:"Edit",CAPTION_SAVE:"Save",CAPTION_PRINT:"Print",CAPTION_LOAD:"Load",CAPTION_ADD:"Add",UI_SEARCH:"search . . .",UI_PAGESIZE:"Page size:",UI_EXPORTCSV:"Export CSV",UI_CURRENTROWS:"Current rows",UI_ALLROWS:"All rows",UI_REMOVEROW:"Do you want to delete this row?",UI_SHOWINGRECORDS:"Showing {0} to {1} of {2} records",UI_FILTEREDRECORDS:"(Filtered from {0} total records)",UI_HTTPERROR:"Unable to contact server; please, try again later.",UI_GENERATEREPORT:"Generate Report",UI_TWOCOLS:"Two columns",UI_ONECOL:"One column",UI_MAXIMIZE:"Maximize",UI_RESTORE:"Restore",UI_MOVEUP:"Move Up",UI_MOVEDOWN:"Move Down",UI_MOVELEFT:"Move Left",UI_MOVERIGHT:"Move Right",UI_COLLAPSE:"Collapse",UI_EXPAND:"Expand",OP_NONE:"None",OP_EQUALS:"Equals",OP_NOTEQUALS:"Not Equals",OP_CONTAINS:"Contains",OP_NOTCONTAINS:"Not Contains",OP_STARTSWITH:"Starts With",OP_NOTSTARTSWITH:"Not Starts With",OP_ENDSWITH:"Ends With",OP_NOTENDSWITH:"Not Ends With",OP_BETWEEN:"Between"},es:{EDITOR_REGEX_DOESNT_MATCH:"El campo no es válido contra la expresión regular.",EDITOR_REQUIRED:"El campo es requerido.",EDITOR_MIN_CHARS:"El campo requiere mínimo {0} caracteres.",EDITOR_MAX_CHARS:"El campo requiere máximo {0} caracteres.",EDITOR_MIN_NUMBER:"El número mínimo es {0}.",EDITOR_MAX_NUMBER:"El número maximo es {0}.",EDITOR_MIN_DATE:"La fecha mínima es {0}.",EDITOR_MAX_DATE:"La fecha máxima es {0}.",EDITOR_MATCH:"El campo debe de conincidir con el campo {0}.",CAPTION_APPLY:"Aplicar",CAPTION_CLEAR:"Limpiar",CAPTION_CLOSE:"Cerrar",CAPTION_SELECTCOLUMNS:"Seleccionar columnas",CAPTION_FILTER:"Filtro",CAPTION_VALUE:"Valor",CAPTION_REMOVE:"Remover",CAPTION_CANCEL:"Cancelar",CAPTION_EDIT:"Editar",CAPTION_SAVE:"Guardar",CAPTION_PRINT:"Imprimir",CAPTION_LOAD:"Cargar",CAPTION_ADD:"Agregar",UI_SEARCH:"buscar . . .",UI_PAGESIZE:"# Registros:",UI_EXPORTCSV:"Exportar CSV",UI_CURRENTROWS:"Esta página",UI_ALLROWS:"Todo",UI_REMOVEROW:"¿Desea eliminar el registro?",UI_SHOWINGRECORDS:"Mostrando registros {0} al {1} de {2}",UI_FILTEREDRECORDS:"(De un total de {0} registros)",UI_HTTPERROR:"No se logro contactar el servidor, intente más tarde.",UI_GENERATEREPORT:"Generar Reporte",UI_TWOCOLS:"Dos columnas",UI_ONECOL:"Una columna",UI_MAXIMIZE:"Maximizar",UI_RESTORE:"Restaurar",UI_MOVEUP:"Mover Arriba",UI_MOVEDOWN:"Mover Abajo",UI_MOVELEFT:"Mover Izquierda",UI_MOVERIGHT:"Mover Derecha",UI_COLLAPSE:"Colapsar",UI_EXPAND:"Expandir",OP_NONE:"Ninguno",OP_EQUALS:"Igual",OP_NOTEQUALS:"No Igual",OP_CONTAINS:"Contiene",OP_NOTCONTAINS:"No Contiene",OP_STARTSWITH:"Comienza Con",OP_NOTSTARTSWITH:"No Comienza Con",OP_ENDSWITH:"Termina Con",OP_NOTENDSWITH:"No Termina Con",OP_BETWEEN:"Entre"}},e.setLanguage=function(t){return e.currentLanguage=t,e},e.addTranslation=function(t,n,r){var o=e.translationTable[t]||e.translationTable[e.currentLanguage]||e.translationTable[e.defaultLanguage];return o[n]=r,e},e.translate=function(t){var n=e.translationTable[e.currentLanguage]||e.translationTable[e.defaultLanguage];return n[t]||t}}]).filter("translate",["tubularTranslate",function(t){return function(n,r,o,a,i){if(e.isDefined(n)){var l=t.translate(n);return l=l.replace("{0}",r||""),l=l.replace("{1}",o||""),l=l.replace("{2}",a||""),l=l.replace("{3}",i||"")}return n}}])}(angular);