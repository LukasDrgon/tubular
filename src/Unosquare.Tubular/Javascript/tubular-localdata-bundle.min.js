(function(n){"use strict";function t(t,r,u,f){function o(i){i.requireAuthentication=!1;var u=function(n){f.error(n);r.defer().resolve(n)};return i.serverUrl.indexOf("data:")===0?{promise:r(function(t){var r=i.serverUrl.substr(29),u;r=atob(r);u=n.fromJson(r);t(e(i.data,u))}),cancel:u}:{promise:r(function(n){n(t.retrieveDataAsync(i).promise.then(function(n){return e(i.data,n)}))}),cancel:u}}function e(t,r){var f={Counter:0,CurrentPage:1,FilteredRecordCount:0,TotalRecordCount:0,Payload:[],TotalPages:0},e,o,s,h,c,l,a;if(r.length===0)return f;e=r;o=t.Columns.filter(function(n){return n.SortOrder>0}).map(function(n){return(n.SortDirection==="Descending"?"-":"")+n.Name});for(s in o)o.hasOwnProperty(s)&&(e=u("orderBy")(e,o[s]));return h=t.Columns.filter(function(n){return n.Filter&&n.Filter.Text}).map(function(n){var t={};return n.Filter.Operator==="Contains"&&(t[n.Name]=n.Filter.Text),t}),h.length>0&&(e=u("filter")(e,i(h))),t.Search&&t.Search.Operator==="Auto"&&t.Search.Text&&(c=t.Columns.filter(function(n){return n.Searchable}).map(function(n){var i={};return i[n.Name]=t.Search.Text,i}),c.length>0&&(e=u("filter")(e,function(t){var u=i(c),r=!1;return n.forEach(u,function(n,i){t[i]&&t[i].toLocaleLowerCase().indexOf(n)>=0&&(r=!0)}),r}))),f.FilteredRecordCount=e.length,f.TotalRecordCount=e.length,f.Payload=e.slice(t.Skip,t.Take+t.Skip),f.TotalPages=(f.FilteredRecordCount+t.Take-1)/t.Take,f.TotalPages>0&&(l=Math.pow(10,0),a=1+t.Skip/f.FilteredRecordCount*f.TotalPages,f.CurrentPage=(a*l|0)/l,f.CurrentPage<1&&(f.CurrentPage=1)),f}return{getByKey:t.getByKey,get:t.get,retrieveDataAsync:o}}function i(n){var r={},t,i;for(t in n)if(n.hasOwnProperty(t))for(i in n[t])n[t].hasOwnProperty(i)&&(r[i]=n[t][i].toLocaleLowerCase());return r}n.module("tubular.services").factory("tubularLocalData",t).run(["tubularHttp","tubularLocalData",function(n,t){n.registerService("local",t)}]);t.$inject=["tubularHttp","$q","$filter","$log"]})(angular);